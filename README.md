# Franka Starter Controllers

This repository contains plug and play controllers packge for the Franka Emika Panda and Franka Reasearch 3 robots that work both on the physical robot and in simulation*.  

This package is intended for beginners at ROS in general and the Franka ecosystem in particular. 

For the time being it only supports ROS1 Noetic since a lot of setups are still using it (including mine), with plans to eventually grow it into ROS2 Humble.

*all controllers, except cartesian_velocity_controller *technically* work in simulation, once you run them you'll understand why franka only included predefined paths in their gazebo implementation. The inclusion of this controller is just a proof of concept since unified_velocity_controller is better in almost every way.
## Features

Plug and play controllers that function using libfranka and franka_ros, accept external commands via topics to move the robot (unlike the predefined "franka_example_controllers" from franka_ros).
The included controllers are:

- Simple joint velocity controller (best for beginners)
- Joint velocity controller (with command time-out)
- Unified velocity controller (both cartesian and joint commands)
- Cartesian velocity controller (based on FrankaVelocityCartesianInterface, which is not exposed in simulation)  
- GUI control (teleop) panels for joint and cartesian control
- This README! I will try to make it as beginner-friendly as possible and include all the relevant tips. 


## Installation
Note: "root of workspace" means the folder of the workspace (like "catkin_ws").
I will assume you already installed libfranka and franka_ros (this package should work with all versions)

Clone this repository into your ROS workspace's `src` folder:

```bash
cd ~/catkin_ws/src
git clone https://github.com/higifnr/Franka-Starter-Controllers.git
```

Install dependencies and build your workspace or package

```bash
cd ~/catkin_ws/
rosdep update
rosdep install --from-paths src --ignore-src --rosdistro noetic -y --skip-keys libfranka
catkin_make
```

You may or may not encounter errors when using rosdep, if you do, it will tell you the pacakge(s) that it couldn't get and all you need to do is:
```bash
sudo apt install <package-name>
```
or if it's a Python pacakge:
```bash
pip install <package-name>
```
then attempt to build again
```bash
catkin_make
```
## Usage

Either launch a simulation:
```bash
roslaunch franka_gazebo panda.launch rviz:=true use_gripper:=true
```

or franka_control on the real robot:
```bash
roslaunch franka_control franka_control.launch robot_ip:=<robot ip here>
```

Load all the controllers this package has to offer:
```bash
roslaunch franka_starter_controllers load_all_controllers.launch
```

Activate whatever controller you want (for example: joint_velocity_controller):
```bash
rosrun controller_manager spawner simple_joint_velocity_controller
```

Run the appropriate control panel node
```bash
rosrun franka_starter_controllers joint_vel_control_panel.py
```

**IMPORTANT**: For now the topics are hardcoded in the control panel, you have to go to the python script and change it manually if you want to use it with another controller.


## DISCLAIMER

Generative AI has been used throughout this project.

The GUI nodes are almost exclusively generated by LLMs (since UI dev is not my focus at all with this project), as well as the boilerplate for the C++ code.